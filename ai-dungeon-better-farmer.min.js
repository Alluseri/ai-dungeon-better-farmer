const yes = true, no = false, enable = true, disable = false, enabled = true, disabled = false;

var Settings = {
	"I understand that by changing these settings I make my account subject to a manual or automated ban, and I claim full responsibility": no,

	"Bypass 30 action limit": disable,
	"Don't wait 10 seconds": disabled
};

const e=e=>Settings[{unsafe:"I understand that by changing these settings I make my account subject to a manual or automated ban, and I claim full responsibility",bypass:"Bypass 30 action limit",nowait:"Don't wait 10 seconds"}[e]];if(!e("unsafe")&&(e("bypass")||e("nowait")))throw"You did not claim full responsibility when modifying settings.";var n=null,t=null,a=null,r=null,o=0;const i="v1.1";async function s(e){return await new Promise((function(n,t){setTimeout(n,e)}))}function u(e,n){return{operationName:"EventHookSendUserEvent",variables:{input:{eventName:e,variation:"web",clientInfo:n}},query:"mutation EventHookSendUserEvent($input: EventInput) {\n  sendUserEvent(input: $input)\n}\n"}}async function l(e){return await(await _aidfuck_fetch("https://api.aidungeon.io/graphql",{method:"POST",body:JSON.stringify(e),headers:{authorization:r,"content-type":"application/json",accept:"*/*"}})).json()}function d(a,r){switch(a){case 0:return void(!e("bypass")&&o>=30?(t.parentElement.parentElement.onclick=null,t.innerText="LIMIT REACHED",t.parentElement.parentElement.style.backgroundColor="#f73a2d",n.innerHTML="<center>Uh oh! It seems like you reached the 30-action limit.<br>Please refresh the page now and proceed to playing.</center>"):(t.parentElement.parentElement.onclick=r,t.innerText="+20 ACTIONS",t.parentElement.parentElement.style.backgroundColor="#00c1d6"));case 1:return t.parentElement.parentElement.onclick=null,t.innerText="PLEASE WAIT...",void(t.parentElement.parentElement.style.backgroundColor="#3b3b3b");case 2:return t.parentElement.parentElement.onclick=null,t.innerText="WAITING 10 SECONDS...",void(t.parentElement.parentElement.style.backgroundColor="#3b3b3b")}}async function c(t,r,i){console.log("Pre-init routine complete."),setTimeout((e=>Array.from(e.body.children).find((e=>"DIV"==e.tagName&&""==e.id&&e.children.length>0)).remove()),200,i),n.innerHTML="<center><b>Refresh</b> the page after you're done farming.<br><i><small>Powered by catgirl supremacy, provided to you by the API king.</small></i></center>",t("#root").removeEventListener("click",r(t("#root")).click[0].listener),_backup=async function(){d(1,_backup);var n={os:"web",model:navigator.userAgent.toLowerCase(),version:"unknown"},t=u("ad_reward_button_press",n),r=u("ad_rewarded_reward_earned",n);await l(t),e("nowait")||(d(2,_backup),await s(1e4),d(1,_backup)),l(r),await l({operationName:"IncreaseAdCounterAdContext",variables:{},query:"mutation IncreaseAdCounterAdContext($addActions: Int) {\n  increaseAdCountdown(addActions: $addActions)\n}\n"}),a.innerHTML="You have "+(o=(await l({operationName:"UserContextGetAdCountdown",variables:{},query:"query UserContextGetAdCountdown {\n  adCountdown {\n    id\n    currentCount\n    enforceAds\n    shouldAutoplayAds\n    __typename\n  }\n}\n"})).data.adCountdown.currentCount)+" Actions",d(0,_backup)},d(0,_backup)}(async()=>{n=$$("div[dir=auto]").find((e=>e.innerText.startsWith("Your actions are"))),t=$$("div[dir=auto]").find((e=>"WATCH AN AD"==e.innerText)),a=$$("div[dir=auto]").find((e=>e.innerText.startsWith("You have")));var i=$$("div[dir=auto]").find((e=>"upgrade plan"==e.innerText.toLowerCase())).parentElement.parentElement.parentElement,s=$$("div[dir=auto]").find((e=>"Autoplay Ads"==e.innerText)).parentElement.parentElement;if(!(n&&t&&a&&i&&s))throw"Couldn't find a required HTML element.";o=Number.parseInt(a.innerText.match(/\d+/)[0]),n.innerHTML="<center>Welcome to AI Dungeon Farmer v1.0!<br>"+(e("unsafe")?'<span style="color: #f73a2d">You are running the unsafe version! I hope you understand what you\'re doing.</span>':'<span style="color: #15e823">You are running the safe version!</span>')+"<br><small><i>Alluseri worked hard on this one.<br>Please enjoy!</i> <3</small></center>",n.parentElement.style.alignSelf="center",t.innerText="INITIALIZE FARMER",i.remove(),s.remove(),_aidfuck_fetch=fetch,fetch=async function(e,n){var t=n.headers?.authorization;t&&!r&&(r=t)},(uni=function(e,n,t){r?c(e,n,t):setTimeout(uni,1e3,e,n,t)})($,getEventListeners,document)})();
